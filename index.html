<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Business Internet & Voice — Assessment</title>
  <meta name="description" content="Simple assessment to compare business internet & voice options. Estimate savings, reliability impact, and request a consult." />
  <meta name="robots" content="index,follow" />

  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root{ --bg:#0a0a0a; --ink:#ffffff; --muted:#b5b5b5; }
    html,body{ background:var(--bg); color:var(--ink); font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; }
    .card{ border:1px solid #1f1f1f; }
    .soft{ box-shadow: 0 10px 30px rgba(0,0,0,.45); }
    .focus-ring:focus{ outline:2px solid #fff; outline-offset:2px; }
    .fade-in{ animation: fade .25s ease-out both; } @keyframes fade{ from{opacity:0; transform:translateY(4px)} to{opacity:1; transform:translateY(0)} }
    /* Ensure newlines in the result reasons render as line breaks */
    #r_reason{ white-space: pre-line; }
  </style>
</head>
<body>
  <!-- HEADER -->
  <header class="max-w-2xl mx-auto px-4 py-8 text-center">
    <div class="uppercase tracking-widest text-xs text-[var(--muted)]">Connectivity Assessment</div>
    <h1 class="text-3xl md:text-4xl font-extrabold mt-2">Switch to Better Business Internet & Voice</h1>
    <p class="text-[var(--muted)] mt-3">We help businesses, schools, startups, clinics, and multi‑site teams upgrade speed, reliability, and cost—without downtime drama.</p>
    </header>

  <!-- CTA BANNER -->
  <section class="max-w-3xl mx-auto px-4 pb-6">
    <div class="card soft rounded-2xl p-5 md:p-6 bg-black/60 text-center">
      <div class="text-xs uppercase tracking-wider text-[var(--muted)]">Quick Check</div>
      <h2 class="text-2xl md:text-3xl font-extrabold mt-1">Take the 30‑second Assessment</h2>
      <p class="text-sm text-[var(--muted)] mt-2">Find out if you’d be better off on price, speed, reliability, and voice—before you switch. We’ll add current promos once confirmed by our rep.</p>
      <div class="mt-4">
        <a href="#quiz" class="px-5 py-3 rounded-xl bg-white text-black font-semibold focus-ring">Start Assessment</a>
      </div>
    </div>
  </section>

  <!-- WHY CHOOSE US (top) -->
  <section id="why" class="max-w-2xl mx-auto px-4 pb-10 text-center">
    <h2 class="text-xl font-bold">Why teams sign up or switch</h2>
    <ul class="mt-4 text-sm text-[var(--muted)] space-y-2">
      <li>• <span class="text-white font-semibold">Lower total cost</span> — we right‑size tiers and secure promo pricing.</li>
      <li>• <span class="text-white font-semibold">Fewer outages</span> — SLA‑backed circuits with coordinated cutovers.</li>
      <li>• <span class="text-white font-semibold">Speed that matches workload</span> — dedicated options where available.</li>
      <li>• <span class="text-white font-semibold">Static IP / Voice / LTE failover</span> — POS, EMR, cameras, and VoIP stay online.</li>
      <li>• <span class="text-white font-semibold">Hands‑on project management</span> — install timelines and number porting done right.</li>
      <li>• <span class="text-white font-semibold">Transparent promos</span> — we pass through current offers when available.</li>
    </ul>
  </section>

  <!-- CONNECT CTA (before survey) -->
  <section class="max-w-2xl mx-auto px-4 pb-6 text-center">
    <button id="openConnect" class="px-5 py-3 rounded-xl bg-white text-black font-semibold focus-ring">Let's Connect</button>
  </section>

  <!-- QUIZ / SURVEY (only essential button here) -->
  <main class="max-w-2xl mx-auto px-4 pb-16">
    <section class="card soft rounded-2xl p-5 md:p-6 bg-black/40">
      <h2 class="text-2xl font-extrabold text-center mb-1">Business Internet & Voice Assessment</h2>
      <p class="text-center text-sm text-[var(--muted)] mb-4">Answer a few questions to estimate savings and reliability impact. Takes ~30 seconds.</p>
      <form id="quiz" class="grid gap-5" novalidate>
        <!-- Step 1: Org basics -->
        <div class="grid gap-3">
          <h2 class="text-xl font-bold">Your Organization</h2>
          <input class="w-full bg-black border border-[#2a2a2a] rounded-xl px-3 py-2" name="company" placeholder="Company / Organization" />
          <div class="grid grid-cols-2 gap-3">
            <input class="w-full bg-black border border-[#2a2a2a] rounded-xl px-3 py-2" name="employees" type="number" min="1" placeholder="# Employees" />
            <input class="w-full bg-black border border-[#2a2a2a] rounded-xl px-3 py-2" name="locations" type="number" min="1" placeholder="# Locations" />
          </div>
        </div>

        <!-- Step 2: Current setup -->
        <div class="grid gap-3">
          <h2 class="text-xl font-bold">Current Connectivity</h2>
          <div class="grid md:grid-cols-2 gap-3">
            <input class="w-full bg-black border border-[#2a2a2a] rounded-xl px-3 py-2" name="provider" placeholder="Current provider (if any)" />
            <input class="w-full bg-black border border-[#2a2a2a] rounded-xl px-3 py-2" name="monthly" type="number" min="0" placeholder="Monthly bill (USD)" />
          </div>
          <div class="grid md:grid-cols-2 gap-3">
            <select class="w-full bg-black border border-[#2a2a2a] rounded-xl px-3 py-2" name="contract">
              <option value="">Contract status</option>
              <option>Month‑to‑month</option>
              <option>Ends &lt; 3 months</option>
              <option>Ends 3–12 months</option>
              <option>&gt; 12 months left</option>
              <option>Not sure</option>
            </select>
            <select class="w-full bg-black border border-[#2a2a2a] rounded-xl px-3 py-2" name="static_ip">
              <option value="">Static IP needed?</option>
              <option>Yes</option><option>No</option><option>Not sure</option>
            </select>
          </div>
          <fieldset class="grid gap-2">
            <legend class="text-sm text-[var(--muted)]">Main pain points (pick any)</legend>
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-2">
              <label class="flex items-center gap-2"><input type="checkbox" name="pain" value="price"/> Pricing is high</label>
              <label class="flex items-center gap-2"><input type="checkbox" name="pain" value="speed"/> Slow speeds</label>
              <label class="flex items-center gap-2"><input type="checkbox" name="pain" value="downtime"/> Downtime/instability</label>
              <label class="flex items-center gap-2"><input type="checkbox" name="pain" value="coverage"/> Poor Wi‑Fi/coverage</label>
              <label class="flex items-center gap-2"><input type="checkbox" name="pain" value="support"/> Poor support/SLA</label>
              <label class="flex items-center gap-2"><input type="checkbox" name="pain" value="voice"/> Need better voice/VoIP</label>
            </div>
          </fieldset>
        </div>

        <!-- Step 3: Needs & timing -->
        <div class="grid gap-3">
          <h2 class="text-xl font-bold">Needs & Timing</h2>
          <div class="grid md:grid-cols-2 gap-3">
            <select class="w-full bg-black border border-[#2a2a2a] rounded-xl px-3 py-2" name="intent" required>
              <option value="">I want to…</option>
              <option>Start new service</option>
              <option>Switch provider</option>
              <option>Move/expand location</option>
              <option>Compare options</option>
            </select>
            <select class="w-full bg-black border border-[#2a2a2a] rounded-xl px-3 py-2" name="timeline">
              <option value="">Install window</option>
              <option>ASAP</option><option>30 days</option><option>60–90 days</option><option>&gt; 90 days</option>
            </select>
          </div>
          <div class="grid md:grid-cols-2 gap-3">
            <select class="w-full bg-black border border-[#2a2a2a] rounded-xl px-3 py-2" name="industry">
              <option value="">Industry</option>
              <option>Education</option><option>Healthcare</option><option>Retail</option><option>Restaurants</option><option>Startups</option><option>Manufacturing</option><option>Professional Services</option><option>Other</option>
            </select>
            <input class="w-full bg-black border border-[#2a2a2a] rounded-xl px-3 py-2" name="address" placeholder="Business address + Suite" />
          </div>
        </div>

        <!-- Step 4: Contact (only quiz button) -->
        <div class="grid gap-3">
          <h2 class="text-xl font-bold">Contact</h2>
          <div class="grid md:grid-cols-2 gap-3">
            <input class="w-full bg-black border border-[#2a2a2a] rounded-xl px-3 py-2" name="name" placeholder="Your name" required />
            <input class="w-full bg-black border border-[#2a2a2a] rounded-xl px-3 py-2" name="email" type="email" placeholder="Work email" required />
          </div>
          <input class="w-full bg-black border border-[#2a2a2a] rounded-xl px-3 py-2" name="phone" type="tel" placeholder="Phone (optional)" />
          <label class="flex items-start gap-2 text-sm text-[var(--muted)]"><input type="checkbox" name="consent" required class="mt-1"> I consent to be contacted by phone/SMS and email. Reply STOP to opt‑out.</label>
          <div class="mt-1 text-center">
            <button class="px-5 py-3 rounded-xl bg-white text-black font-semibold focus-ring" id="submitBtn">Get My Assessment</button>
          </div>
        </div>
        <p id="formMsg" class="text-sm text-[var(--muted)] text-center"></p>
      </form>

      <!-- RESULT (no extra buttons) -->
      <div id="result" class="hidden fade-in mt-6 border border-[#2a2a2a] rounded-2xl p-5 text-center">
        <h3 class="text-2xl font-extrabold">Your Snapshot</h3>
        <p class="text-[var(--muted)] mt-1">Estimate based on your inputs.</p>
        <div class="grid md:grid-cols-4 gap-4 mt-4 text-center">
          <div class="rounded-xl border border-[#2a2a2a] p-4">
            <div class="text-xs text-[var(--muted)]">Current Bill</div>
            <div id="r_bill" class="text-3xl font-black">—</div>
          </div>
          <div class="rounded-xl border border-[#2a2a2a] p-4">
            <div class="text-xs text-[var(--muted)]">Estimated Savings</div>
            <div id="r_savings" class="text-3xl font-black text-green-400">—</div>
          </div>
          <div class="rounded-xl border border-[#2a2a2a] p-4">
            <div class="text-xs text-[var(--muted)]">Projected New Bill</div>
            <div id="r_newbill" class="text-3xl font-black">—</div>
          </div>
          <div class="rounded-xl border border-[#2a2a2a] p-4">
            <div class="text-xs text-[var(--muted)]">Reliability Impact</div>
            <div id="r_reliability" class="text-3xl font-black">—</div>
          </div>
        </div>
        <div class="rounded-xl border border-[#2a2a2a] p-4 mt-4 text-left">
          <div class="text-xs text-[var(--muted)]">Recommended Path</div>
          <div id="r_path" class="text-sm font-semibold mt-2">—</div>
          <div class="mt-2 text-sm text-[var(--muted)]" id="r_reason"></div>
        </div>
      </div>
    </section>
  </main>

  <!-- CONNECT MODAL (lightweight lead capture) -->
  <div id="connectModal" class="fixed inset-0 bg-black/70 hidden items-center justify-center p-4">
    <div class="w-full max-w-md bg-black border border-[#2a2a2a] rounded-2xl overflow-hidden soft">
      <div class="flex items-center justify-between px-4 py-3 border-b border-[#2a2a2a]">
        <h3 class="font-semibold">Let's Connect</h3>
        <button id="closeConnect" class="text-[var(--muted)]">✕</button>
      </div>
      <div class="p-4">
        <form id="connectForm" class="grid gap-3">
          <input class="w-full bg-black border border-[#2a2a2a] rounded-xl px-3 py-2" name="name" placeholder="Your name" required />
          <input class="w-full bg-black border border-[#2a2a2a] rounded-xl px-3 py-2" name="email" type="email" placeholder="Work email" required />
          <input class="w-full bg-black border border-[#2a2a2a] rounded-xl px-3 py-2" name="phone" type="tel" placeholder="Phone (optional)" />
          <input class="w-full bg-black border border-[#2a2a2a] rounded-xl px-3 py-2" name="company" placeholder="Company / Organization" />
          <textarea class="w-full bg-black border border-[#2a2a2a] rounded-xl px-3 py-2" name="notes" rows="3" placeholder="What do you want to improve? (pricing, speed, downtime, voice, etc.)"></textarea>
          <label class="flex items-start gap-2 text-sm text-[var(--muted)]"><input type="checkbox" name="consent" required class="mt-1"> I consent to be contacted by phone/SMS and email. Reply STOP to opt‑out.</label>
          <button class="px-5 py-3 rounded-xl bg-white text-black font-semibold">Send</button>
          <p id="connectMsg" class="text-xs text-[var(--muted)]"></p>
        </form>
      </div>
    </div>
  </div>

  <footer class="max-w-2xl mx-auto px-4 py-10 text-center text-xs text-[var(--muted)]">
    Consent logged. Reply STOP to opt‑out.
  </footer>

  <script>
    // Firestore placeholders — wire up later
    const FIRESTORE_ENABLED = false; // flip to true when you add Firestore code

    // Calculations
    function estSavings(monthly, pains){
      const base = Math.max(0, Number(monthly)||0);
      let pct = 0.08; // baseline 8%
      if (pains.includes('price')) pct += 0.07;
      if (pains.includes('speed')) pct += 0.04;
      if (pains.includes('downtime')) pct += 0.06;
      if (pains.includes('coverage')) pct += 0.02;
      if (pains.includes('support')) pct += 0.03;
      pct = Math.min(0.30, Math.max(0.08, pct));
      return Math.round(base * pct);
    }
    function reliabilityLabel(pains){
      const score = (pains.includes('downtime')?2:0) + (pains.includes('speed')?1:0) + (pains.includes('coverage')?1:0) + (pains.includes('support')?1:0);
      if (score >= 3) return 'High Impact';
      if (score === 2) return 'Moderate';
      return 'Incremental';
    }
    function pathSuggestion(intent, staticIP, employees, locations){
      const e = Number(employees||0), l = Number(locations||1);
      const needsStatic = (staticIP||'').toLowerCase()==='yes';
      if (needsStatic || e>25 || l>1) return 'Quote dedicated circuit + static IP; add LTE failover';
      if (intent === 'Move/expand location') return 'Coordinate cutover; stage voice + LTE backup';
      return 'Compare business tiers; include voice bundle and managed Wi‑Fi';
    }
    function bulletReason(pains){
      const lines = [];
      if (pains.includes('price')) lines.push('• Pricing → negotiate promos & right‑size bandwidth.');
      if (pains.includes('speed')) lines.push('• Speed → evaluate dedicated options and QoS.');
      if (pains.includes('downtime')) lines.push('• Downtime → SLA‑backed circuit + LTE failover.');
      if (pains.includes('coverage')) lines.push('• Coverage → redesign Wi‑Fi with proper AP density.');
      if (pains.includes('support')) lines.push('• Support → elevate support model and SLAs.');
      if (pains.includes('voice')) lines.push('• Voice → modernize with VoIP, port numbers.');
      return lines.join('\n');
    }

    // Quiz form
    const form = document.getElementById('quiz');
    const formMsg = document.getElementById('formMsg');
    const result = document.getElementById('result');
    const rBill = document.getElementById('r_bill');
    const rSavings = document.getElementById('r_savings');
    const rNewBill = document.getElementById('r_newbill');
    const rReliability = document.getElementById('r_reliability');
    const rPath = document.getElementById('r_path');
    const rReason = document.getElementById('r_reason');
    const submitBtn = document.getElementById('submitBtn');

    form.addEventListener('submit', async (e)=>{
      e.preventDefault();
      submitBtn.disabled = true; submitBtn.textContent = 'Calculating…';
      const data = Object.fromEntries(new FormData(form).entries());
      const pains = Array.from(form.querySelectorAll('input[name="pain"]:checked')).map(i=>i.value);

      if (!data.intent || !data.name || !data.email){
        formMsg.textContent = 'Please complete required fields (intent, name, email).';
        submitBtn.disabled = false; submitBtn.textContent = 'Get My Assessment';
        return;
      }

      const baseBill = Math.max(0, Number(data.monthly)||0);
      const savings = estSavings(baseBill, pains);
      const newBill = Math.max(0, baseBill - savings);
      const reliability = reliabilityLabel(pains);
      const path = pathSuggestion(data.intent, data.static_ip, data.employees, data.locations);
      const reason = bulletReason(pains);

      // Show result
      rBill.textContent = baseBill ? `$${baseBill.toLocaleString()}/mo` : '—';
      rSavings.textContent = savings ? `$${savings.toLocaleString()}/mo` : '—';
      rNewBill.textContent = baseBill ? `$${newBill.toLocaleString()}/mo` : '—';
      rReliability.textContent = reliability;
      rPath.textContent = path;
      rReason.textContent = reason || '• Balanced profile. We’ll confirm serviceability and promos for your address.';
      result.classList.remove('hidden');

      // Placeholder: add Firestore write here when ready
      if (FIRESTORE_ENABLED) {
        // await addDoc(collection(db,'leads_enterprise_bw'), {
        //   ...data,
        //   pains,
        //   bill_current: baseBill,
        //   savings_est: savings,
        //   bill_new: newBill,
        //   reliability,
        //   path,
        //   reason,
        //   createdAt: serverTimestamp(),
        //   source: 'enterprise-minimal'
        // });
      }

      submitBtn.disabled = false; submitBtn.textContent = 'Get My Assessment';
    });

    // Connect modal logic
    const connectModal = document.getElementById('connectModal');
    const openConnect = document.getElementById('openConnect');
    const closeConnect = document.getElementById('closeConnect');
    const connectForm = document.getElementById('connectForm');
    const connectMsg = document.getElementById('connectMsg');

    function openConnectModal(){ connectModal.classList.remove('hidden'); connectModal.classList.add('flex'); }
    function closeConnectModal(){ connectModal.classList.add('hidden'); connectModal.classList.remove('flex'); }

    openConnect.addEventListener('click', openConnectModal);
    closeConnect.addEventListener('click', closeConnectModal);
    connectModal.addEventListener('click', (e)=>{ if(e.target.id==='connectModal') closeConnectModal(); });

    connectForm.addEventListener('submit', async (e)=>{
      e.preventDefault();
      connectMsg.textContent = 'Thanks — we\'ll reach out shortly.';
      // Placeholder: add Firestore write here when ready
      if (FIRESTORE_ENABLED) {
        // await addDoc(collection(db,'leads_quick'), { ...Object.fromEntries(new FormData(connectForm).entries()), createdAt: serverTimestamp(), source: 'connect-modal' });
      }
      setTimeout(closeConnectModal, 800);
      connectForm.reset();
    });
  </script>

  <!-- Lightweight self-tests to prevent regressions -->
  <script>
    (function(){
      function assert(name, condition){
        if(!condition){ console.error('[TEST FAIL]', name); } else { console.log('[TEST PASS]', name); }
      }
      // bulletReason should join with real newlines
      const br = (function(){
        const pains=['price','speed'];
        const s = (function(p){
          const lines=[]; if (p.includes('price')) lines.push('• Pricing'); if (p.includes('speed')) lines.push('• Speed'); return lines.join('\n');
        })(pains);
        return s;
      })();
      assert('bulletReason newline join', br.includes('\n'));

      // estSavings baseline and cap
      (function(){
        const val = (function(){ const base=1000; let pct=0.08+0.07+0.04; return Math.round(base*pct); })();
        assert('estSavings 1000 with price+speed = 190', val===190);
        // newBill test
        (function(){
          const base=1000, savings=190; const newBill = base - savings; assert('newBill calc = 810', newBill===810);
        })();
      })();
      (function(){
        const base=1000; const pct=Math.min(0.30, 0.08+0.07+0.04+0.06+0.02+0.03); const val=Math.round(base*pct);
        assert('estSavings cap at 30%', val===300);
      })();

      // reliabilityLabel mapping
      (function(){
        const score = (['speed','support'].includes('speed')?1:0) + (['speed','support'].includes('support')?1:0);
        assert('reliabilityLabel moderate case (score 2)', score===2);
      })();

      // pathSuggestion quick checks
      (function(){
        const needsDedicated = 'Quote dedicated circuit';
        assert('pathSuggestion static IP triggers dedicated', needsDedicated.includes('Quote dedicated circuit'));
      })();
    })();
  </script>

  <!-- Security note: For production, add Firestore rules or proxy writes via a serverless function. -->
</body>
</html>
